webpackJsonp([7],{"+jlW":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("woOf"),i=a.n(n),r=a("7+uW"),o=a("kwPQ"),l=a.n(o),s=a("giWn"),c=a("0xDb");a("E4LH");r.default.component("VueImgInputer",l.a);var d={data:function(){return{show:!1,list:[],limit:10,startPage:1,totalQuantity:0,currentPage:1,formLabelWidth:"px",dialogFormVisible:!1,imageUrl:"",searchName:"",textMap:{dialogStatus:"新增会员"},form:{memberName:"",mobilePhone:"",identity:"",birthday:new Date,address:"",vipType:"",sex:"0",iconUrl:"",faceBase64:""}}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.listLoading=!0;var t={limit:this.limit,startPage:this.startPage,name:this.searchName,sEcho:1};Object(s.c)(t).then(function(t){e.listLoading=!1,e.list=t.values,e.totalQuantity=t.total})},tableRowClassName:function(e){e.row;return e.rowIndex%2==0?"warning-row":"success-row"},updateMemberForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var a={accountId:t.form.accountId,memberName:t.form.memberName,sex:t.form.sex,mobilePhone:t.form.mobilePhone,cardNo:t.form.mobilePhone,memberType:t.form.memberType,idCard:t.form.idCard,birthday:t.form.birthday,iconBase64:t.form.faceBase64,adress:t.form.adress,roleCode:"member",memberId:t.form.memberId,status:1};t.listLoading=!0,t.form.birthday=Object(c.a)(t.form.birthday,"{y}-{m}-{d}"),editMember(a).then(function(e){t.listLoading=!1,t.dialogFormVisible=!1,t.fetchData()},function(e){t.listLoading=!1})})},addMemberForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var a={accountId:"",memberName:t.form.memberName,sex:t.form.sex,mobilePhone:t.form.mobilePhone,cardNo:t.form.mobilePhone,memberType:t.form.memberType,idCard:t.form.idCard,birthday:t.form.birthday,iconBase64:t.form.faceBase64,adress:t.form.adress,status:1};t.listLoading=!0,t.form.birthday=Object(c.a)(t.form.birthday,"{y}-{m}-{d}"),addMember(a).then(function(e){t.listLoading=!1,t.dialogFormVisible=!1,t.fetchData()},function(e){t.listLoading=!1})})},searchMember:function(){this.fetchData()},handleSizeChange:function(e){this.limit=e,this.fetchData()},handleCurrentChange:function(e){this.startPage=e,this.fetchData(),console.log("Go To "+e)},handleAdd:function(e){this.form={},this.textMap.dialogStatus="新增会员",this.dialogFormVisible=!0},handleUpdate:function(e){var t=this;this.textMap.dialogStatus="编辑会员";var a=this;getMemberInfo(e).then(function(e){t.dialog_title="编辑会员",t.listLoading=!1,t.$nextTick(function(){a.form=i()({},e),console.log("https://testjs.appscomm.cn/fitness/"+e.iconUrl),a.form={accountId:e.accountId,idCard:e.idCard,iconUrl:"https://testjs.appscomm.cn/fitness/"+e.iconUrl,memberName:e.memberName,mobilePhone:e.mobilePhone,adress:e.adress,memberType:e.memberType,memberId:this.form.memberId}}),t.dialogFormVisible=!0},function(e){t.listLoading=!1})},handleFaceChange:function(){var e=this;if(this.form.iconUrl&&window.FileReader&&/^image/.test(this.form.iconUrl.type)){var t=new FileReader;t.readAsDataURL(this.form.iconUrl),t.onloadend=function(){e.form.faceBase64=this.result.split("base64,")[1]}}}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[e._v("\n昵称:\n"),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"search"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.searchMember(t)}},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}}),e._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchMember}},[e._v("search")]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":"","row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{align:"center",label:"序号",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" \n        "+e._s(t.$index+1)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"账户",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.accountId)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"性别",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.sex)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"手机号",width:"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.mobilePhone))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"名称",width:"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.realName)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"created_at",label:"添加时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),e._v(" "),a("span",[e._v(e._s(t.row.createTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作123",width:"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(a){e.handleUpdate(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,50,100],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.totalQuantity},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var u=a("VU/8")(d,m,!1,function(e){a("vgU5")},null,null);t.default=u.exports},"6IJ9":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.el-pagination {\n  text-align: center;\n  margin-top: 2em;\n}\n#add {\n  margin-bottom: 1em;\n}\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409eff;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n}\n.avatar {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n.el-form-item {\n  margin-bottom: 22px;\n}\n.el-dialog__body {\n  padding: 10px 20px;\n}\n",""])},vgU5:function(e,t,a){var n=a("6IJ9");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("b32368fe",n,!0)}});