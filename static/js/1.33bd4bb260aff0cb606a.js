webpackJsonp([1],{D3Uk:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.el-pagination {\n  text-align: center;\n  margin-top: 2em;\n}\n#add {\n  margin-bottom: 1em;\n}\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409eff;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n}\n.avatar {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n.el-form-item {\n  margin-bottom: 22px;\n}\n.el-dialog__body {\n  padding: 10px 20px;\n}\n",""])},Gotq:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("woOf"),o=a.n(r),n=a("7+uW"),l=a("kwPQ"),i=a.n(l),s=a("giWn"),m=a("0xDb"),c=a("E4LH");n.default.component("VueImgInputer",i.a);var d={data:function(){return{show:!1,list:[],limit:10,startPage:1,totalQuantity:0,currentPage:1,formLabelWidth:"120px",dialogFormVisible:!1,imageUrl:"",searchName:"",textMap:{dialogStatus:"新增会员"},form:{memberName:"",mobilePhone:"",identity:"",birthday:new Date,address:"",vipType:"",sex:"0",iconUrl:"",faceBase64:""},pickerOptions1:{disabledDate:function(e){return e.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]},rules:{memberName:c.d,mobilePhone:c.c,idCard:c.b}}},filters:{statusFilter:function(e){return{published:"success",draft:"gray",deleted:"danger"}[e]}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.listLoading=!0;var t={limit:this.limit,startPage:this.startPage,name:this.searchName,sEcho:1};Object(s.e)(t).then(function(t){e.listLoading=!1,e.list=t.values,e.totalQuantity=t.total})},tableRowClassName:function(e){e.row;return e.rowIndex%2==0?"warning-row":"success-row"},updateMemberForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var a={accountId:t.form.accountId,memberName:t.form.memberName,sex:t.form.sex,mobilePhone:t.form.mobilePhone,cardNo:t.form.mobilePhone,memberType:t.form.memberType,idCard:t.form.idCard,birthday:t.form.birthday,iconBase64:t.form.faceBase64,adress:t.form.adress,roleCode:"member",memberId:t.form.memberId,status:1};t.listLoading=!0,t.form.birthday=Object(m.a)(t.form.birthday,"{y}-{m}-{d}"),Object(s.b)(a).then(function(e){t.listLoading=!1,t.dialogFormVisible=!1,t.fetchData()},function(e){t.listLoading=!1})})},addMemberForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var a={accountId:"",memberName:t.form.memberName,sex:t.form.sex,mobilePhone:t.form.mobilePhone,cardNo:t.form.mobilePhone,memberType:t.form.memberType,idCard:t.form.idCard,birthday:t.form.birthday,iconBase64:t.form.faceBase64,adress:t.form.adress,status:1};t.listLoading=!0,t.form.birthday=Object(m.a)(t.form.birthday,"{y}-{m}-{d}"),Object(s.a)(a).then(function(e){t.listLoading=!1,t.dialogFormVisible=!1,t.fetchData()},function(e){t.listLoading=!1})})},searchMember:function(){this.fetchData()},handleSizeChange:function(e){this.limit=e,this.fetchData()},handleCurrentChange:function(e){this.startPage=e,this.fetchData(),console.log("Go To "+e)},handleAdd:function(e){this.form={},this.textMap.dialogStatus="新增会员",this.dialogFormVisible=!0},handleUpdate:function(e){var t=this;this.textMap.dialogStatus="编辑会员";var a=this;Object(s.d)(e).then(function(e){t.dialog_title="编辑会员",t.listLoading=!1,t.$nextTick(function(){a.form=o()({},e),console.log("https://testjs.appscomm.cn/fitness/"+e.iconUrl),a.form={accountId:e.accountId,idCard:e.idCard,iconUrl:"https://testjs.appscomm.cn/fitness/"+e.iconUrl,memberName:e.memberName,mobilePhone:e.mobilePhone,adress:e.adress,memberType:e.memberType,memberId:this.form.memberId}}),t.dialogFormVisible=!0},function(e){t.listLoading=!1})},handleFaceChange:function(){var e=this;if(this.form.iconUrl&&window.FileReader&&/^image/.test(this.form.iconUrl.type)){var t=new FileReader;t.readAsDataURL(this.form.iconUrl),t.onloadend=function(){e.form.faceBase64=this.result.split("base64,")[1]}}}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[e._v("\n姓名:\n"),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"search"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.searchMember(t)}},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}}),e._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchMember}},[e._v("search")]),e._v(" "),a("el-button",{attrs:{type:"primary",id:"add"},on:{click:e.handleAdd}},[e._v("添加会员")]),e._v(" "),a("el-dialog",{attrs:{title:e.textMap.dialogStatus,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"用户头像:","label-width":e.formLabelWidth}},[a("VueImgInputer",{attrs:{accept:"image/*",icon:"img",imgSrc:e.form.iconUrl},on:{onChange:e.handleFaceChange},model:{value:e.form.iconUrl,callback:function(t){e.$set(e.form,"iconUrl",t)},expression:"form.iconUrl"}})],1),e._v(" "),e.show?a("el-form-item",{attrs:{label:"faceBase64","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.form.faceBase64,callback:function(t){e.$set(e.form,"faceBase64",t)},expression:"form.faceBase64"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"用户姓名","label-width":e.formLabelWidth,prop:"memberName"}},[a("el-input",{model:{value:e.form.memberName,callback:function(t){e.$set(e.form,"memberName",t)},expression:"form.memberName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"会员卡号","label-width":e.formLabelWidth,prop:"mobilePhone"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入手机号"},model:{value:e.form.mobilePhone,callback:function(t){e.$set(e.form,"mobilePhone",t)},expression:"form.mobilePhone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号","label-width":e.formLabelWidth,prop:"mobilePhone"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.mobilePhone,callback:function(t){e.$set(e.form,"mobilePhone",t)},expression:"form.mobilePhone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号","label-width":e.formLabelWidth,prop:"idCard"}},[a("el-input",{model:{value:e.form.idCard,callback:function(t){e.$set(e.form,"idCard",t)},expression:"form.idCard"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"住址","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.form.adress,callback:function(t){e.$set(e.form,"adress",t)},expression:"form.adress"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"会员类型","label-width":e.formLabelWidth,prop:""}},[a("el-input",{model:{value:e.form.memberType,callback:function(t){e.$set(e.form,"memberType",t)},expression:"form.memberType"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别","label-width":e.formLabelWidth}},[a("el-radio",{attrs:{label:"0"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[e._v("女")])],1),e._v(" "),a("el-form-item",{attrs:{label:"出生日期","label-width":e.formLabelWidth,prop:""}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","picker-options":e.pickerOptions1},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["新增会员"==e.textMap.dialogStatus?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addMemberForm("form")}}},[e._v("确 定")]):a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.updateMemberForm("form")}}},[e._v("编辑")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":"","row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{align:"center",label:"序号",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" \n        "+e._s(t.$index+1)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"姓名",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.memberName)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"性别",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.sex)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"手机号",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.mobilePhone))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"会员类型",width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.memberType)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{"class-name":"status-col",label:"所属会籍",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.membershipName?a("el-tag",{attrs:{type:"published"}},[e._v(e._s(t.row.membershipName))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{"class-name":"status-col",label:"所属教练",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.coachName)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"created_at",label:"添加时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),e._v(" "),a("span",[e._v(e._s(t.row.createTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"时间卡",width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.cardTimeDay)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"私教卡",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[null!=t.row.cardCoachNum?a("el-tag",{attrs:{type:t.row.status}},[e._v("\n            "+e._s(t.row.cardCoachNum)+"张，余"+e._s(t.row.cardCoachLeft)+"次\n          ")]):a("el-tag",{attrs:{type:"deleted"}},[e._v("\n            无私教卡\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"次卡",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[null!=t.row.cardCountNum?a("el-tag",{attrs:{type:t.row.status}},[e._v("\n            "+e._s(t.row.cardCountNum)+"张，"+e._s(t.row.cardCountLeft)+"次\n          ")]):a("el-tag",{attrs:{type:"deleted"}},[e._v("\n            无次卡\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"充值卡",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[null!=t.row.cardRechargeNum?a("el-tag",{attrs:{type:t.row.status}},[e._v("\n            "+e._s(t.row.cardRechargeNum)+"张，"+e._s(t.row.cardRechargeLeft)+"元\n          ")]):e._e(),e._v(" "),null==t.row.cardRechargeNum?a("el-tag",{attrs:{type:"deleted"}},[e._v("\n            未充值\n          ")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作123",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(a){e.handleUpdate(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,50,100],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.totalQuantity},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var f=a("VU/8")(d,u,!1,function(e){a("mgnH")},null,null);t.default=f.exports},mgnH:function(e,t,a){var r=a("D3Uk");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("714bb547",r,!0)}});